<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Repaso - dplyr y ggplot | Taller de R aplicado al Análisis Demográfico</title>
  <meta name="description" content="5 Repaso - dplyr y ggplot | Taller de R aplicado al Análisis Demográfico" />
  <meta name="generator" content="bookdown 0.45 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Repaso - dplyr y ggplot | Taller de R aplicado al Análisis Demográfico" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="fbathory/TallerDemoR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Repaso - dplyr y ggplot | Taller de R aplicado al Análisis Demográfico" />
  
  
  

<meta name="author" content="Ayelén Martinez, Florencia Bathory" />


<meta name="date" content="2025-10-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ggplot.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Taller de R aplicado al Análisis Demográfico</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introducción</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#informaci%C3%B3n-general"><i class="fa fa-check"></i><b>1.1</b> Información general</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#prepar%C3%A1ndonos"><i class="fa fa-check"></i><b>1.2</b> PrepaRándonos</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#instalaci%C3%B3n-de-y-rstudio"><i class="fa fa-check"></i><b>1.2.1</b> Instalación de y RStudio</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#instalaci%C3%B3n-de-paquetes"><i class="fa fa-check"></i><b>1.2.2</b> Instalación de paquetes</a></li>
<li class="chapter" data-level="1.2.3" data-path="index.html"><a href="index.html#contactos"><i class="fa fa-check"></i><b>1.2.3</b> Contactos</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#presentaci%C3%B3n-inicial"><i class="fa fa-check"></i><b>1.3</b> Presentación inicial</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> R Base</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#el-proyecto"><i class="fa fa-check"></i><b>2.1</b> El proyecto</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="intro.html"><a href="intro.html#variables"><i class="fa fa-check"></i><b>2.1.1</b> Variables</a></li>
<li class="chapter" data-level="2.1.2" data-path="intro.html"><a href="intro.html#actividad"><i class="fa fa-check"></i><b>2.1.2</b> Actividad</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#vectores"><i class="fa fa-check"></i><b>2.2</b> Vectores</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="intro.html"><a href="intro.html#actividad-1"><i class="fa fa-check"></i><b>2.2.1</b> Actividad</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#data.frames"><i class="fa fa-check"></i><b>2.3</b> Data.frames</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="intro.html"><a href="intro.html#actividad-2"><i class="fa fa-check"></i><b>2.3.1</b> Actividad</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#listas"><i class="fa fa-check"></i><b>2.4</b> Listas</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intro.html"><a href="intro.html#actividad-3"><i class="fa fa-check"></i><b>2.4.1</b> Actividad</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#referencias-y-materiales-adicionales"><i class="fa fa-check"></i><b>2.5</b> Referencias y materiales adicionales</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>3</b> dplyr</a>
<ul>
<li class="chapter" data-level="3.1" data-path="dplyr.html"><a href="dplyr.html#lectura-de-datos"><i class="fa fa-check"></i><b>3.1</b> Lectura de datos</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="dplyr.html"><a href="dplyr.html#acceso-a-archivos-no-locales"><i class="fa fa-check"></i><b>3.1.1</b> Acceso a archivos no locales</a></li>
<li class="chapter" data-level="3.1.2" data-path="dplyr.html"><a href="dplyr.html#actividad-4"><i class="fa fa-check"></i><b>3.1.2</b> Actividad</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="dplyr.html"><a href="dplyr.html#dplyr-1"><i class="fa fa-check"></i><b>3.2</b> dplyr</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="dplyr.html"><a href="dplyr.html#seleccionar-select-renombrar-rename"><i class="fa fa-check"></i><b>3.2.1</b> seleccionar (<strong>select</strong>), renombrar (<strong>rename</strong>)</a></li>
<li class="chapter" data-level="3.2.2" data-path="dplyr.html"><a href="dplyr.html#actividad-5"><i class="fa fa-check"></i><b>3.2.2</b> Actividad</a></li>
<li class="chapter" data-level="3.2.3" data-path="dplyr.html"><a href="dplyr.html#resumir-summarise-por-grupos-group_by"><i class="fa fa-check"></i><b>3.2.3</b> resumir (<strong>summarise</strong>) por grupos (<strong>group_by</strong>)</a></li>
<li class="chapter" data-level="3.2.4" data-path="dplyr.html"><a href="dplyr.html#transformar-mutate-filtrar-filter-ordenar-arrange"><i class="fa fa-check"></i><b>3.2.4</b> transformar (<strong>mutate</strong>), filtrar (<strong>filter</strong>), ordenar (<strong>arrange</strong>)</a></li>
<li class="chapter" data-level="3.2.5" data-path="dplyr.html"><a href="dplyr.html#exportar"><i class="fa fa-check"></i><b>3.2.5</b> exportar</a></li>
<li class="chapter" data-level="3.2.6" data-path="dplyr.html"><a href="dplyr.html#actividad-6"><i class="fa fa-check"></i><b>3.2.6</b> Actividad</a></li>
<li class="chapter" data-level="3.2.7" data-path="dplyr.html"><a href="dplyr.html#recursos-adicionales"><i class="fa fa-check"></i><b>3.2.7</b> Recursos adicionales</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ggplot.html"><a href="ggplot.html"><i class="fa fa-check"></i><b>4</b> ggplot</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ggplot.html"><a href="ggplot.html#introducci%C3%B3n-1"><i class="fa fa-check"></i><b>4.1</b> Introducción</a></li>
<li class="chapter" data-level="4.2" data-path="ggplot.html"><a href="ggplot.html#ggplot-1"><i class="fa fa-check"></i><b>4.2</b> ggplot</a></li>
<li class="chapter" data-level="4.3" data-path="ggplot.html"><a href="ggplot.html#lexis"><i class="fa fa-check"></i><b>4.3</b> Lexis</a></li>
<li class="chapter" data-level="4.4" data-path="ggplot.html"><a href="ggplot.html#estudio-de-cohorte-un-ejemplo"><i class="fa fa-check"></i><b>4.4</b> Estudio de cohorte: un ejemplo</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="ggplot.html"><a href="ggplot.html#actividad-7"><i class="fa fa-check"></i><b>4.4.1</b> Actividad</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="ggplot.html"><a href="ggplot.html#reproduciendo"><i class="fa fa-check"></i><b>4.5</b> Reproduciendo</a></li>
<li class="chapter" data-level="4.6" data-path="ggplot.html"><a href="ggplot.html#otras-visualizaciones"><i class="fa fa-check"></i><b>4.6</b> Otras visualizaciones</a></li>
<li class="chapter" data-level="4.7" data-path="ggplot.html"><a href="ggplot.html#material-adicional-y-no-tanto"><i class="fa fa-check"></i><b>4.7</b> Material adicional (y no tanto)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="repaso---dplyr-y-ggplot.html"><a href="repaso---dplyr-y-ggplot.html"><i class="fa fa-check"></i><b>5</b> Repaso - dplyr y ggplot</a>
<ul>
<li class="chapter" data-level="5.1" data-path="repaso---dplyr-y-ggplot.html"><a href="repaso---dplyr-y-ggplot.html#bienvenidxs"><i class="fa fa-check"></i><b>5.1</b> Bienvenidxs!</a></li>
<li class="chapter" data-level="5.2" data-path="repaso---dplyr-y-ggplot.html"><a href="repaso---dplyr-y-ggplot.html#medidas-resumen-y-exploratorias"><i class="fa fa-check"></i><b>5.2</b> Medidas resumen y exploratorias</a></li>
<li class="chapter" data-level="5.3" data-path="repaso---dplyr-y-ggplot.html"><a href="repaso---dplyr-y-ggplot.html#dplyr-2"><i class="fa fa-check"></i><b>5.3</b> dplyr</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="repaso---dplyr-y-ggplot.html"><a href="repaso---dplyr-y-ggplot.html#seleccionar-select-renombrar-rename-1"><i class="fa fa-check"></i><b>5.3.1</b> %&gt;%, seleccionar (<strong>select</strong>), renombrar (<strong>rename</strong>)</a></li>
<li class="chapter" data-level="5.3.2" data-path="repaso---dplyr-y-ggplot.html"><a href="repaso---dplyr-y-ggplot.html#resumir-summarise-por-grupos-group_by-1"><i class="fa fa-check"></i><b>5.3.2</b> resumir (<strong>summarise</strong>) por grupos (<strong>group_by</strong>)</a></li>
<li class="chapter" data-level="5.3.3" data-path="repaso---dplyr-y-ggplot.html"><a href="repaso---dplyr-y-ggplot.html#transformar-mutate-filtrar-filter-ordenar-arrange-1"><i class="fa fa-check"></i><b>5.3.3</b> transformar (<strong>mutate</strong>), filtrar (<strong>filter</strong>), ordenar (<strong>arrange</strong>)</a></li>
<li class="chapter" data-level="5.3.4" data-path="repaso---dplyr-y-ggplot.html"><a href="repaso---dplyr-y-ggplot.html#exportar-1"><i class="fa fa-check"></i><b>5.3.4</b> exportar</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><p>Taller de R aplicado al Análisis Demográfico</p></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="repaso---dplyr-y-ggplot" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Repaso - dplyr y ggplot<a href="repaso---dplyr-y-ggplot.html#repaso---dplyr-y-ggplot" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="bienvenidxs" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Bienvenidxs!<a href="repaso---dplyr-y-ggplot.html#bienvenidxs" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Antes que nada, felicitaciones por llegar hasta este momento!</p>
<p><img src="figs/aplausos.gif" /></p>
<p>Hoja de ruta para estos días:</p>
<ol style="list-style-type: decimal">
<li><p>Introducción (y repaso):</p>
<ul>
<li><p>dplyr y tidyr</p></li>
<li><p>ggplot. Características básicas</p></li>
</ul></li>
<li><p>Visualizando la demografía:</p>
<ul>
<li><p>Pirámides de población</p></li>
<li><p>Mapas temáticos</p></li>
<li><p>Diagramas de Lexis: líneas de vida y superficies</p></li>
<li><p>Curvas Kaplan-Meier</p></li>
</ul></li>
<li><p>Funciones I - Divide y reina<strong>R</strong>ás</p>
<ul>
<li><p>Modelos de crecimiento poblacional</p></li>
<li><p>Estandarización</p></li>
<li><p>Otras técnicas básicas</p></li>
<li><p>Fuentes de datos accesibles desde R</p></li>
</ul></li>
<li><p>Funciones II - Nace<strong>R</strong>, Migra<strong>R</strong>, Mori<strong>R</strong> y otros eventos</p>
<ul>
<li><p>Tablas de mortalidad</p></li>
<li><p>Indicadores de fecundidad</p></li>
<li><p>Indicadores de migración</p></li>
<li><p>Paquetes disponibles para el análisis demográfico</p></li>
</ul></li>
<li><p>Reportes dinámicos</p>
<ul>
<li><p>Documentación y contenido reproducible</p></li>
<li><p>R Markdown/Quarto: reportes y presentaciones reproducibles</p></li>
</ul></li>
</ol>
</div>
<div id="medidas-resumen-y-exploratorias" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Medidas resumen y exploratorias<a href="repaso---dplyr-y-ggplot.html#medidas-resumen-y-exploratorias" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Vamos a hacer un breve repaso de las funciones que más usamos (hasta ahora) , y para eso usamos nuestra ya conocida base de la EDER. ¿Qué hace cada una de estas funciones?</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="repaso---dplyr-y-ggplot.html#cb1-1" tabindex="-1"></a>eder_personas_br <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/eder2019_personas.csv&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="repaso---dplyr-y-ggplot.html#cb2-1" tabindex="-1"></a><span class="fu">dim</span>(eder_personas_br)       </span>
<span id="cb2-2"><a href="repaso---dplyr-y-ggplot.html#cb2-2" tabindex="-1"></a><span class="fu">class</span>(eder_personas_br)     </span>
<span id="cb2-3"><a href="repaso---dplyr-y-ggplot.html#cb2-3" tabindex="-1"></a><span class="fu">str</span>(eder_personas_br)       </span>
<span id="cb2-4"><a href="repaso---dplyr-y-ggplot.html#cb2-4" tabindex="-1"></a><span class="fu">summary</span>(eder_personas_br)   </span>
<span id="cb2-5"><a href="repaso---dplyr-y-ggplot.html#cb2-5" tabindex="-1"></a><span class="fu">colnames</span>(eder_personas_br)  </span>
<span id="cb2-6"><a href="repaso---dplyr-y-ggplot.html#cb2-6" tabindex="-1"></a><span class="fu">ncol</span>(eder_personas_br)      </span>
<span id="cb2-7"><a href="repaso---dplyr-y-ggplot.html#cb2-7" tabindex="-1"></a><span class="fu">nrow</span>(eder_personas_br)      </span></code></pre></div>
<p>Ahora vamos con una variable numérica como edad <code>eder_personas_br$p3b</code>, ¿qué hacen estas funciones?</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="repaso---dplyr-y-ggplot.html#cb3-1" tabindex="-1"></a><span class="fu">mean</span>(eder_personas_br<span class="sc">$</span>p3b)</span>
<span id="cb3-2"><a href="repaso---dplyr-y-ggplot.html#cb3-2" tabindex="-1"></a><span class="fu">min</span>(eder_personas_br<span class="sc">$</span>p3b)</span>
<span id="cb3-3"><a href="repaso---dplyr-y-ggplot.html#cb3-3" tabindex="-1"></a><span class="fu">max</span>(eder_personas_br<span class="sc">$</span>p3b)</span>
<span id="cb3-4"><a href="repaso---dplyr-y-ggplot.html#cb3-4" tabindex="-1"></a><span class="fu">range</span>(eder_personas_br<span class="sc">$</span>p3b)</span></code></pre></div>
</div>
<div id="dplyr-2" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> dplyr<a href="repaso---dplyr-y-ggplot.html#dplyr-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Empapémonos en cómo trabajar nuestras bases de datos</p>
<div id="seleccionar-select-renombrar-rename-1" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> %&gt;%, seleccionar (<strong>select</strong>), renombrar (<strong>rename</strong>)<a href="repaso---dplyr-y-ggplot.html#seleccionar-select-renombrar-rename-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>¿Se acuerdan del pipe (<code>%&gt;%</code> o <code>|&gt;</code>)? Este operador concatena operaciones sobre el mismo objeto, verbalizando el proceso, generando fluidez en nuestro razonamiento y mejor entendimiento para un tercero. En vez de <code>f(x)</code> (aplicar una función <code>f()</code> a un objeto <code>x</code>) se tiene <code>x %&gt;% f()</code> (tengo un objeto <code>x</code> y le aplico la función <code>f()</code>). Vamos a utilizarlo con las ya conocidas <code>select()</code> y `rename``</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="repaso---dplyr-y-ggplot.html#cb4-1" tabindex="-1"></a>eder_personas <span class="ot">&lt;-</span> eder_personas_br <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="repaso---dplyr-y-ggplot.html#cb4-2" tabindex="-1"></a>  <span class="fu">select</span>(id, nhogar, p2, p3b, p4) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="repaso---dplyr-y-ggplot.html#cb4-3" tabindex="-1"></a>  <span class="co"># toma el objeto *** y selecciona las columnas ***  </span></span>
<span id="cb4-4"><a href="repaso---dplyr-y-ggplot.html#cb4-4" tabindex="-1"></a>  </span>
<span id="cb4-5"><a href="repaso---dplyr-y-ggplot.html#cb4-5" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">id_viv =</span> id, <span class="at">nhog=</span>nhogar, <span class="at">sexo=</span>p2, <span class="at">edad=</span>p3b, <span class="at">rel_par=</span>p4)</span>
<span id="cb4-6"><a href="repaso---dplyr-y-ggplot.html#cb4-6" tabindex="-1"></a>  <span class="co"># NuevoNombre = ViejoNombre</span></span></code></pre></div>
</div>
<div id="resumir-summarise-por-grupos-group_by-1" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> resumir (<strong>summarise</strong>) por grupos (<strong>group_by</strong>)<a href="repaso---dplyr-y-ggplot.html#resumir-summarise-por-grupos-group_by-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Como nos interesa calcular medidas resumen para poder obtener conclusiones, plantear hipótesis o simplemente conocer más el fenómeno relevado/registrado en los datos, podemos usar <code>summarise</code> (resumen) y <code>n()</code> (contar filas) para contar, por ejemplo, cuántos casos hay en nuestra base:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="repaso---dplyr-y-ggplot.html#cb5-1" tabindex="-1"></a>n_personas <span class="ot">&lt;-</span> eder_personas_br <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">casos =</span> <span class="fu">n</span>()) </span></code></pre></div>
<p>Esto crea un objeto <code>n_personas</code> con la cantidad de casos.</p>
<p>Si queremos considerar el total de personas expandido (con su ponderador), tenemos que utilizar la función <code>sum(factor expansión)</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="repaso---dplyr-y-ggplot.html#cb6-1" tabindex="-1"></a>n_personas_exp <span class="ot">&lt;-</span> eder_personas_br <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">casos =</span> <span class="fu">sum</span>(fexp))</span></code></pre></div>
<p>Otro ejemplo: para contar cuántas viviendas fueron relevadas en la base debemos considerar casos con valor <em>distinto</em> en la variable de código de vivienda <code>id</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="repaso---dplyr-y-ggplot.html#cb7-1" tabindex="-1"></a>n_viviendas <span class="ot">&lt;-</span> eder_personas_br <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">casos =</span> <span class="fu">n_distinct</span>(id))</span></code></pre></div>
<p>¿Cuál es el promedio de personas por vivienda dentro de la encuesta?</p>
<p>Con <code>summarise()</code> podemos aplicar cualquier función resumen sobre los datos. Por ejemplo: ¿Cuál es la edad promedio de las personas? ¿Cual es la edad mínima reportada?</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="repaso---dplyr-y-ggplot.html#cb8-1" tabindex="-1"></a>eder_personas_br <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">edad_media =</span> <span class="fu">mean</span>(p3b))</span>
<span id="cb8-2"><a href="repaso---dplyr-y-ggplot.html#cb8-2" tabindex="-1"></a>eder_personas_br <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">edad_min =</span> <span class="fu">min</span>(p3b))</span>
<span id="cb8-3"><a href="repaso---dplyr-y-ggplot.html#cb8-3" tabindex="-1"></a>eder_personas_br <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">edad_max =</span> <span class="fu">max</span>(p3b))</span></code></pre></div>
<p>Y recuerden que podemos incluir todo lo anterior en una sola sentencia gracias al pipe <code>%&gt;%</code></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="repaso---dplyr-y-ggplot.html#cb9-1" tabindex="-1"></a>eder_resumen<span class="ot">&lt;-</span> eder_personas_br <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="repaso---dplyr-y-ggplot.html#cb9-2" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_personas =</span> <span class="fu">n</span>(), </span>
<span id="cb9-3"><a href="repaso---dplyr-y-ggplot.html#cb9-3" tabindex="-1"></a>            <span class="at">n_viviendas =</span> <span class="fu">n_distinct</span>(id), </span>
<span id="cb9-4"><a href="repaso---dplyr-y-ggplot.html#cb9-4" tabindex="-1"></a>            <span class="at">pers_x_viv =</span> n_personas<span class="sc">/</span>n_viviendas,</span>
<span id="cb9-5"><a href="repaso---dplyr-y-ggplot.html#cb9-5" tabindex="-1"></a>            <span class="at">edad_media =</span> <span class="fu">mean</span>(p3b),</span>
<span id="cb9-6"><a href="repaso---dplyr-y-ggplot.html#cb9-6" tabindex="-1"></a>            <span class="at">edad_min =</span> <span class="fu">min</span>(p3b)</span>
<span id="cb9-7"><a href="repaso---dplyr-y-ggplot.html#cb9-7" tabindex="-1"></a>            )</span></code></pre></div>
<p>Las operaciones principales que podemos realizar mediante <code>summarise()</code> las podés ver <a href="https://dplyr.tidyverse.org/reference/summarise.html">acá</a>.
Pero su utilidad se potencia cuando queremos <em>segmentar por grupos</em>. Esta agrupación antecede a <code>summarise()</code>, y requiere ser indicada con <code>group_by()</code> incluyendo como argumento las variables para agrupar. Por ejemplo, para conocer la cantidad de personas relevadas por sexo:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="repaso---dplyr-y-ggplot.html#cb10-1" tabindex="-1"></a>pers_sexo <span class="ot">&lt;-</span> eder_personas_br <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="repaso---dplyr-y-ggplot.html#cb10-2" tabindex="-1"></a>                    <span class="fu">group_by</span>(p2) <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="repaso---dplyr-y-ggplot.html#cb10-3" tabindex="-1"></a>                    <span class="fu">summarise</span>(<span class="at">n_personas =</span> <span class="fu">n</span>())</span></code></pre></div>
<p>Seguro estas cantidades difieren según código de <em>relación de parentesco con lx jefx de hogar</em>. Pero primero podemos agregar la variable que describe los códigos. Carguemos como objeto el <em>diccionario</em> e incorporémoslo:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="repaso---dplyr-y-ggplot.html#cb11-1" tabindex="-1"></a>cod_rel_par <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">p4 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">14</span>, </span>
<span id="cb11-2"><a href="repaso---dplyr-y-ggplot.html#cb11-2" tabindex="-1"></a>                           <span class="at">p4_descripc =</span> <span class="fu">c</span>(<span class="st">&quot;Jefe/a&quot;</span>,</span>
<span id="cb11-3"><a href="repaso---dplyr-y-ggplot.html#cb11-3" tabindex="-1"></a>                                        <span class="st">&quot;Cónyuge/pareja&quot;</span>,</span>
<span id="cb11-4"><a href="repaso---dplyr-y-ggplot.html#cb11-4" tabindex="-1"></a>                                        <span class="st">&quot;Hijo/a&quot;</span>,</span>
<span id="cb11-5"><a href="repaso---dplyr-y-ggplot.html#cb11-5" tabindex="-1"></a>                                        <span class="st">&quot;Hijastro/a&quot;</span>,</span>
<span id="cb11-6"><a href="repaso---dplyr-y-ggplot.html#cb11-6" tabindex="-1"></a>                                        <span class="st">&quot;Yerno o nuera&quot;</span>,</span>
<span id="cb11-7"><a href="repaso---dplyr-y-ggplot.html#cb11-7" tabindex="-1"></a>                                        <span class="st">&quot;Nieto/a&quot;</span>,</span>
<span id="cb11-8"><a href="repaso---dplyr-y-ggplot.html#cb11-8" tabindex="-1"></a>                                        <span class="st">&quot;Padre/madre/suegro/a&quot;</span>,</span>
<span id="cb11-9"><a href="repaso---dplyr-y-ggplot.html#cb11-9" tabindex="-1"></a>                                        <span class="st">&quot;Hermano/a&quot;</span>,</span>
<span id="cb11-10"><a href="repaso---dplyr-y-ggplot.html#cb11-10" tabindex="-1"></a>                                        <span class="st">&quot;Cuñado/a&quot;</span>,</span>
<span id="cb11-11"><a href="repaso---dplyr-y-ggplot.html#cb11-11" tabindex="-1"></a>                                        <span class="st">&quot;Sobrino/a&quot;</span>,</span>
<span id="cb11-12"><a href="repaso---dplyr-y-ggplot.html#cb11-12" tabindex="-1"></a>                                        <span class="st">&quot;Abuelo/a&quot;</span>,</span>
<span id="cb11-13"><a href="repaso---dplyr-y-ggplot.html#cb11-13" tabindex="-1"></a>                                        <span class="st">&quot;Otro familiar&quot;</span>,</span>
<span id="cb11-14"><a href="repaso---dplyr-y-ggplot.html#cb11-14" tabindex="-1"></a>                                        <span class="cn">NA</span>,              <span class="co"># Recuerden que el valor 13 era vacío</span></span>
<span id="cb11-15"><a href="repaso---dplyr-y-ggplot.html#cb11-15" tabindex="-1"></a>                                        <span class="st">&quot;Otro no familiar&quot;</span>))</span>
<span id="cb11-16"><a href="repaso---dplyr-y-ggplot.html#cb11-16" tabindex="-1"></a></span>
<span id="cb11-17"><a href="repaso---dplyr-y-ggplot.html#cb11-17" tabindex="-1"></a>eder_personas <span class="ot">&lt;-</span> eder_personas_br <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(cod_rel_par, <span class="at">by =</span> <span class="st">&quot;p4&quot;</span>)</span>
<span id="cb11-18"><a href="repaso---dplyr-y-ggplot.html#cb11-18" tabindex="-1"></a>eder_personas <span class="sc">%&gt;%</span> <span class="fu">count</span>(p4, p4_descripc)</span></code></pre></div>
<div class="take_note_box take_note">
<p><strong>Joins!!!</strong><br>
<strong>dplyr</strong> tiene las funciones típicas de <em>join</em> para el pareo de data.frames dependiendo la relación que deseemos. Ver más <a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">aquí</a>.<br>
<img src="figs/dplyr_joins.png" width="250" alt="Tipos de join" /></p>
</div>
<p>Y ahora podemos obtener la edad promedio de las personas encuestadas según relación de parentesco:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="repaso---dplyr-y-ggplot.html#cb12-1" tabindex="-1"></a>edad_relpar <span class="ot">&lt;-</span> eder_personas <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="repaso---dplyr-y-ggplot.html#cb12-2" tabindex="-1"></a>                    <span class="fu">group_by</span>(p4_descripc) <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="repaso---dplyr-y-ggplot.html#cb12-3" tabindex="-1"></a>                    <span class="fu">summarise</span>(<span class="at">edad_media =</span> <span class="fu">mean</span>(p3b))</span></code></pre></div>
</div>
<div id="transformar-mutate-filtrar-filter-ordenar-arrange-1" class="section level3 hasAnchor" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> transformar (<strong>mutate</strong>), filtrar (<strong>filter</strong>), ordenar (<strong>arrange</strong>)<a href="repaso---dplyr-y-ggplot.html#transformar-mutate-filtrar-filter-ordenar-arrange-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Mediante <code>mutate()</code> podemos crear variables nuevas o reemplazar las existentes (si les ponemos el mismo nombre). Por ejemplo, hacemos una variable que nos diga si la persona es mayor de edad <code>es_mayor</code>, utilizando la función <a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/ifelse">ifelse</a>, la opción base de R.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="repaso---dplyr-y-ggplot.html#cb13-1" tabindex="-1"></a><span class="co"># creo una variable (sin resumir)</span></span>
<span id="cb13-2"><a href="repaso---dplyr-y-ggplot.html#cb13-2" tabindex="-1"></a>eder_mayores <span class="ot">&lt;-</span> eder_personas <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">es_mayor =</span> <span class="fu">ifelse</span>(p3b <span class="sc">&gt;=</span> <span class="dv">18</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span></code></pre></div>
<p>Podemos ordenar la tabla para ordenar de mayor a menor con <code>arrange</code>:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="repaso---dplyr-y-ggplot.html#cb14-1" tabindex="-1"></a>eder_mayores <span class="ot">&lt;-</span> eder_mayores <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(edad)</span>
<span id="cb14-2"><a href="repaso---dplyr-y-ggplot.html#cb14-2" tabindex="-1"></a>eder_mayores</span>
<span id="cb14-3"><a href="repaso---dplyr-y-ggplot.html#cb14-3" tabindex="-1"></a><span class="co"># mejor al revés: descendente</span></span>
<span id="cb14-4"><a href="repaso---dplyr-y-ggplot.html#cb14-4" tabindex="-1"></a>eder_mayores <span class="ot">&lt;-</span> eder_mayores <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(edad))</span></code></pre></div>
<p>Recuerden que <code>p3b = 9999</code> corresponde a <code>No sabe o no responde</code>. Entonces, nos conviene filtrarlos, utilizando <code>filter()</code>. Aunque primero chequeemos el rango de edades, ¿no? Y nos aseguramos de que el filtro se haya hecho bien</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="repaso---dplyr-y-ggplot.html#cb15-1" tabindex="-1"></a><span class="fu">table</span>(eder_mayores<span class="sc">$</span>p3b) <span class="co"># La edad coherente más alta es 103</span></span>
<span id="cb15-2"><a href="repaso---dplyr-y-ggplot.html#cb15-2" tabindex="-1"></a>eder_mayores <span class="ot">&lt;-</span> eder_mayores <span class="sc">%&gt;%</span> <span class="fu">filter</span>(p3b <span class="sc">&lt;=</span> <span class="dv">103</span>) <span class="co"># Operador lógico! ¿se acuerdan?</span></span>
<span id="cb15-3"><a href="repaso---dplyr-y-ggplot.html#cb15-3" tabindex="-1"></a><span class="fu">range</span>(eder_mayores<span class="sc">$</span>p3b)</span></code></pre></div>
<p>Vamos a unir todo lo que vimos hasta ahora: quiero obtener edad promedio de las personas que hicieron la encuesta retrospectiva por máximo nivel educativo alcanzado, pero solo si fueron lxs jefxs o cónyuges, por sexo.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="repaso---dplyr-y-ggplot.html#cb16-1" tabindex="-1"></a>selec_jefcony_sex <span class="ot">&lt;-</span> eder_mayores <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="repaso---dplyr-y-ggplot.html#cb16-2" tabindex="-1"></a>                  <span class="fu">filter</span>(retro <span class="sc">==</span> <span class="dv">1</span>,  <span class="co"># Seleccionados para la encuesta retrospectiva</span></span>
<span id="cb16-3"><a href="repaso---dplyr-y-ggplot.html#cb16-3" tabindex="-1"></a>                         p4 <span class="sc">%in%</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="co"># p4 sea Jefx o cónyuge</span></span>
<span id="cb16-4"><a href="repaso---dplyr-y-ggplot.html#cb16-4" tabindex="-1"></a>                         p3b <span class="sc">&lt;=</span> <span class="dv">103</span>) <span class="sc">%&gt;%</span>  <span class="co"># Edad conocida</span></span>
<span id="cb16-5"><a href="repaso---dplyr-y-ggplot.html#cb16-5" tabindex="-1"></a>                  <span class="fu">group_by</span>(p2,            <span class="co"># Sexo </span></span>
<span id="cb16-6"><a href="repaso---dplyr-y-ggplot.html#cb16-6" tabindex="-1"></a>                           e_nivel) <span class="sc">%&gt;%</span>   <span class="co"># Nivel educativo</span></span>
<span id="cb16-7"><a href="repaso---dplyr-y-ggplot.html#cb16-7" tabindex="-1"></a>                  <span class="fu">summarise</span>(<span class="at">edad_media =</span> <span class="fu">mean</span>(p3b)) <span class="sc">|&gt;</span> </span>
<span id="cb16-8"><a href="repaso---dplyr-y-ggplot.html#cb16-8" tabindex="-1"></a>  <span class="fu">select</span>(p2, e_nivel, edad_media)</span></code></pre></div>
<blockquote>
<p>Si tuviéramos que relatar lo que estamos haciendo, sería algo del tipo: “tomá la eder, filtrame para traer solo jefxs y cónyuges, con edades conocidas que hayan contestado la retrospectiva, agrupámelos por estas variables y calculá el indicador para cada grupo; finalmente selecciona qué quieres mostrar”. Es una <em>¡composición de funciones!</em>.</p>
</blockquote>
<p>Otra operación común es la de calcular distribuciones en una variable, segmentando con determinada agrupación. Podemos ver el porcentaje de mujeres que contestó el cuestionario retrospectivo por año de nacimiento. Considerar que cualquier operación resumen (media, suma, contar) en un data.frame agrupado resumirá por grupos. Aprovechemos eso:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="repaso---dplyr-y-ggplot.html#cb17-1" tabindex="-1"></a>Porc_mujeres <span class="ot">&lt;-</span> eder_mayores <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="repaso---dplyr-y-ggplot.html#cb17-2" tabindex="-1"></a>  <span class="fu">filter</span>(retro <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb17-3"><a href="repaso---dplyr-y-ggplot.html#cb17-3" tabindex="-1"></a>  <span class="fu">group_by</span>(p3, p2) <span class="sc">|&gt;</span> </span>
<span id="cb17-4"><a href="repaso---dplyr-y-ggplot.html#cb17-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">N =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb17-5"><a href="repaso---dplyr-y-ggplot.html#cb17-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">porc =</span> N<span class="sc">/</span><span class="fu">sum</span>(N) <span class="sc">*</span><span class="dv">100</span>) <span class="sc">|&gt;</span> </span>
<span id="cb17-6"><a href="repaso---dplyr-y-ggplot.html#cb17-6" tabindex="-1"></a>  <span class="fu">filter</span>(p2 <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">|&gt;</span> </span>
<span id="cb17-7"><a href="repaso---dplyr-y-ggplot.html#cb17-7" tabindex="-1"></a>  <span class="fu">select</span>(p3, porc)</span></code></pre></div>
<p>Pero esto no es tan útil. Entonces podemos hacer esa distribución por cohorte de nacimiento agrupada, <em>recodificando</em> el año de nacimiento con la función <code>case_when</code> en una nueva variable.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="repaso---dplyr-y-ggplot.html#cb18-1" tabindex="-1"></a><span class="fu">unique</span>(Porc_mujeres<span class="sc">$</span>p3)</span>
<span id="cb18-2"><a href="repaso---dplyr-y-ggplot.html#cb18-2" tabindex="-1"></a>distr_coh <span class="ot">&lt;-</span> eder_mayores <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="repaso---dplyr-y-ggplot.html#cb18-3" tabindex="-1"></a>  <span class="fu">filter</span>(retro <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb18-4"><a href="repaso---dplyr-y-ggplot.html#cb18-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">coh =</span> <span class="fu">case_when</span>(</span>
<span id="cb18-5"><a href="repaso---dplyr-y-ggplot.html#cb18-5" tabindex="-1"></a>    p3 <span class="sc">%in%</span> <span class="dv">1948</span><span class="sc">:</span><span class="dv">1952</span> <span class="sc">~</span> <span class="st">&quot;1948-1952&quot;</span>,</span>
<span id="cb18-6"><a href="repaso---dplyr-y-ggplot.html#cb18-6" tabindex="-1"></a>    p3 <span class="sc">%in%</span> <span class="dv">1968</span><span class="sc">:</span><span class="dv">1972</span> <span class="sc">~</span> <span class="st">&quot;1968-1972&quot;</span>,</span>
<span id="cb18-7"><a href="repaso---dplyr-y-ggplot.html#cb18-7" tabindex="-1"></a>    <span class="cn">TRUE</span>              <span class="sc">~</span> <span class="st">&quot;1978-1982&quot;</span></span>
<span id="cb18-8"><a href="repaso---dplyr-y-ggplot.html#cb18-8" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb18-9"><a href="repaso---dplyr-y-ggplot.html#cb18-9" tabindex="-1"></a>  <span class="fu">group_by</span>(coh, p2) <span class="sc">|&gt;</span> </span>
<span id="cb18-10"><a href="repaso---dplyr-y-ggplot.html#cb18-10" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">N =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb18-11"><a href="repaso---dplyr-y-ggplot.html#cb18-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">porc =</span> N<span class="sc">/</span><span class="fu">sum</span>(N) <span class="sc">*</span><span class="dv">100</span>) <span class="sc">|&gt;</span> </span>
<span id="cb18-12"><a href="repaso---dplyr-y-ggplot.html#cb18-12" tabindex="-1"></a>  <span class="fu">filter</span>(p2 <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">|&gt;</span> </span>
<span id="cb18-13"><a href="repaso---dplyr-y-ggplot.html#cb18-13" tabindex="-1"></a>  <span class="fu">select</span>(coh, porc)</span></code></pre></div>
</div>
<div id="exportar-1" class="section level3 hasAnchor" number="5.3.4">
<h3><span class="header-section-number">5.3.4</span> exportar<a href="repaso---dplyr-y-ggplot.html#exportar-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>¿Y cómo exporto esto? Puede ser a csv o a Excel:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="repaso---dplyr-y-ggplot.html#cb19-1" tabindex="-1"></a><span class="fu">getwd</span>()</span>
<span id="cb19-2"><a href="repaso---dplyr-y-ggplot.html#cb19-2" tabindex="-1"></a></span>
<span id="cb19-3"><a href="repaso---dplyr-y-ggplot.html#cb19-3" tabindex="-1"></a><span class="co"># creo una carpeta de cosas exportadas dentro de data</span></span>
<span id="cb19-4"><a href="repaso---dplyr-y-ggplot.html#cb19-4" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;data/export&quot;</span>)</span>
<span id="cb19-5"><a href="repaso---dplyr-y-ggplot.html#cb19-5" tabindex="-1"></a></span>
<span id="cb19-6"><a href="repaso---dplyr-y-ggplot.html#cb19-6" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="at">x =</span> distr_coh, <span class="at">file =</span> <span class="st">&quot;data/export/Distribución_cohortes.csv&quot;</span>)</span>
<span id="cb19-7"><a href="repaso---dplyr-y-ggplot.html#cb19-7" tabindex="-1"></a><span class="co"># install.packages(&quot;openxlsx&quot;)</span></span>
<span id="cb19-8"><a href="repaso---dplyr-y-ggplot.html#cb19-8" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb19-9"><a href="repaso---dplyr-y-ggplot.html#cb19-9" tabindex="-1"></a><span class="fu">write.xlsx</span>(<span class="at">x =</span> distr_coh, <span class="at">file =</span> <span class="st">&quot;data/export/Distribución_cohortes.xlsx&quot;</span>)</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ggplot.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": true,
    "facebook": true,
    "twitter": false,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": false
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  }
});
});
</script>

</body>

</html>
